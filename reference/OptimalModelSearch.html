<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>A Binary Classification Model Selection  — OptimalModelSearch • binaryClass</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="A Binary Classification Model Selection  — OptimalModelSearch"><meta name="description" content="
This function does binary classification model selection. It compares multiple models (full logistic regression, backward stepwise, forward stepwise, GAM, lasso, and ridge) based on user specified criterions including AUC, Accuracy and AIC. This function provides a simplified method for fitting these binary classification models simultaneously. It then returns the best model based on a predetermined set of control parameters. These parameters include evaluation criteria, formula, data, training percentage and threshold for accuracy calculations."><meta property="og:description" content="
This function does binary classification model selection. It compares multiple models (full logistic regression, backward stepwise, forward stepwise, GAM, lasso, and ridge) based on user specified criterions including AUC, Accuracy and AIC. This function provides a simplified method for fitting these binary classification models simultaneously. It then returns the best model based on a predetermined set of control parameters. These parameters include evaluation criteria, formula, data, training percentage and threshold for accuracy calculations."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">binaryClass</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html" aria-label="Home"><span class="fa fas fa-home fa-lg"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/codoom1/binaryClass" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>A Binary Classification Model Selection <!-- %% ~~function to do ... ~~ --></h1>

      <div class="d-none name"><code>OptimalModelSearch.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><!-- %%  ~~ A concise (1-5 lines) description of what the function does. ~~ -->
This function does binary classification model selection. It compares multiple models (full logistic regression, backward stepwise, forward stepwise, GAM, lasso, and ridge) based on user specified criterions including AUC, Accuracy and AIC. This function provides a simplified method for fitting these binary classification models simultaneously. It then returns the best model based on a predetermined set of control parameters. These parameters include evaluation criteria, formula, data, training percentage and threshold for accuracy calculations.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">OptimalModelSearch</span><span class="op">(</span><span class="va">formula</span>, <span class="va">data</span>, criterion <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AUC"</span>, <span class="st">"Accuracy"</span>, <span class="st">"AIC"</span><span class="op">)</span>,</span>
<span>                   training_percent <span class="op">=</span> <span class="fl">0.8</span>, threshold <span class="op">=</span> <span class="fl">0.5</span>, </span>
<span>                   suppress_warnings <span class="op">=</span> <span class="cn">FALSE</span>, plot_roc <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>                   plot_comparison <span class="op">=</span> <span class="cn">FALSE</span>, multi_panel <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>                   plot_cm <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <p></p>
<dl><dt id="arg-formula">formula<a class="anchor" aria-label="anchor" href="#arg-formula"></a></dt>
<dd><p>A formula object which defines the model structure same as the formula object
  for lm, glm, gams and other model building functions.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data.frame or matrix object where the variables in the formula object can be found. The response variable must code as 1 or 0 for the two classes.</p></dd>


<dt id="arg-criterion">criterion<a class="anchor" aria-label="anchor" href="#arg-criterion"></a></dt>
<dd><p>A criteria specifying which metric the model selection should be based on. This function supports AIC, Accuracy, and AUC</p></dd>


<dt id="arg-training-percent">training_percent<a class="anchor" aria-label="anchor" href="#arg-training-percent"></a></dt>
<dd><p>A numeric value between 0 and 1 indicating the proportion of data to use for training. Default is 0.8.</p></dd>


<dt id="arg-threshold">threshold<a class="anchor" aria-label="anchor" href="#arg-threshold"></a></dt>
<dd><p>A number between 0 and 1 which specifies what threshold to classify
observations as positive or negative. It applicable when method is Accuracy.
Threshold tells the function how to distinguish between the two classes.
The default is 0.5</p></dd>


<dt id="arg-suppress-warnings">suppress_warnings<a class="anchor" aria-label="anchor" href="#arg-suppress-warnings"></a></dt>
<dd><p>Logical indicating whether to suppress warning messages (such as convergence warnings). Default is FALSE. Set to TRUE to hide excessive warnings when using datasets with near-perfect separation.</p></dd>


<dt id="arg-plot-roc">plot_roc<a class="anchor" aria-label="anchor" href="#arg-plot-roc"></a></dt>
<dd><p>Logical indicating whether to automatically plot ROC curves when criterion is "AUC". Default is FALSE. When TRUE, it will display the ROC curve of the best model.</p></dd>


<dt id="arg-plot-comparison">plot_comparison<a class="anchor" aria-label="anchor" href="#arg-plot-comparison"></a></dt>
<dd><p>Logical indicating whether to plot comparison of all models' ROC curves when plot_roc is TRUE. Default is FALSE. When TRUE, it will display ROC curves for all models on a single plot.</p></dd>


<dt id="arg-multi-panel">multi_panel<a class="anchor" aria-label="anchor" href="#arg-multi-panel"></a></dt>
<dd><p>Logical indicating whether to display each model in its own panel when plot_comparison is TRUE. Default is FALSE. When TRUE, it will display each model's ROC curve in a separate panel arranged in a grid layout.</p></dd>


<dt id="arg-plot-cm">plot_cm<a class="anchor" aria-label="anchor" href="#arg-plot-cm"></a></dt>
<dd><p>Logical indicating whether to automatically plot the confusion matrix when criterion is "Accuracy". Default is FALSE. When TRUE, it will display a visual representation of the confusion matrix for the best model.</p></dd>


</dl><p><!-- %%     ~~Describe \code{x} here~~ --></p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The "formula" input specifies how the predictors are included in the model. It functions similarly to the formula objects used in glm, lm, and other modeling functions. This design choice is intended to allow users to easily fit all specified models.</p>
<p>The "Data" input refers to the dataset used for modeling, which can be either a matrix or a dataframe. It's crucial to ensure that all variables specified in the formula are present in the data.</p>
<p>The "Criterion" input allows users to search for a model based on their preferred performance measure. Currently, our function supports three criteria including AUC (which is the most popular in this class), Accuracy, and AIC.</p>
<p>In addition, the "training_percent" input allows users to assess models based on the proportion of training data. This flexibility enhances the model specification process and introduces more dynamics into model building, especially in the case of binary classification. And lastly, the threshold option is applicable when the criterion is Accuracy, it tells the function how to distinguish between the two classes in the case where a confusion matrix had to be generated to calculate the accuracy and other measures such as sensitivity and specificity. The default is 0.5 and users can use this flexibility to train their model based on their knowledge of the problem.</p>
<p>The function compares the following models:</p><ul><li><p>Full Logistic Regression: Uses all predictors in the formula</p></li>
<li><p>Backward Stepwise: Performs backward selection from the full model</p></li>
<li><p>Forward Stepwise: Starts with intercept-only model and adds predictors</p></li>
<li><p>GAM (Generalized Additive Model): Fits smooth terms for numeric predictors</p></li>
<li><p>Lasso Regression: L1 regularization that can shrink coefficients to zero</p></li>
<li><p>Ridge Regression: L2 regularization that shrinks coefficients</p></li>
</ul><p>The function provides automatic visualization based on the chosen criterion:</p><ul><li><p>When criterion="AUC": Use plot_roc=TRUE to display the ROC curve of the best model,
        or with plot_comparison=TRUE to compare all models' ROC curves.
        Use multi_panel=TRUE for clearer visualization with separate panels for each model.</p></li>
<li><p>When criterion="Accuracy": Use plot_cm=TRUE to display the confusion matrix
        of the best model, showing true/false positives/negatives and other metrics.</p></li>
<li><p>When criterion="AIC": No visualization is provided as AIC is a numerical measure.</p></li>
</ul><p><!-- %%  ~~ If necessary, more details than the description above ~~ --></p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><!-- %%  ~Describe the value returned -->
<!-- %%  If it is a LIST, use --></p>
<dl><dt>criterion </dt>
<dd><p>The criterion used for model selection.</p></dd>

<dt>best_model_name </dt>
<dd><p>Name of the best performing model.</p></dd>

<dt>performance_metric </dt>
<dd><p>The value of the specified criterion for the best model.</p></dd>

<dt>details </dt>
<dd><p>Additional model details:</p><ul><li><p>When criterion is "AUC": Contains the ROC object from pROC package, which can be plotted using plot(result$details).</p></li>
<li><p>When criterion is "Accuracy": Contains the confusionMatrix object.</p></li>
<li><p>When criterion is "AIC": Contains AIC values.</p></li>
</ul></dd>

</dl><p><!-- %% ... --></p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Christopher Odoom, Denis Folitse, Owen Gallagher &amp; Paul Shannon &lt;codoom@umass.edu&gt;
<!-- %%  ~~who you are~~ --></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">##==Example 1: Accuracy criterion====##</span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">PimaIndiansDiabetes</span>, package<span class="op">=</span><span class="st">"mlbench"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data.t</span> <span class="op">&lt;-</span> <span class="va">PimaIndiansDiabetes</span></span></span>
<span class="r-in"><span><span class="va">data.t</span><span class="op">$</span><span class="va">diabetes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">data.t</span><span class="op">$</span><span class="va">diabetes</span><span class="op">==</span><span class="st">"neg"</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">OptimalModelSearch</span><span class="op">(</span>formula<span class="op">=</span><span class="va">diabetes</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">data.t</span>,</span></span>
<span class="r-in"><span>                            criterion<span class="op">=</span><span class="st">"Accuracy"</span>, training_percent<span class="op">=</span><span class="fl">0.8</span>, </span></span>
<span class="r-in"><span>                            threshold<span class="op">=</span><span class="fl">0.54</span>, suppress_warnings<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result</span><span class="op">$</span><span class="va">best_model_name</span>  <span class="co"># View best model</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "lasso.Accuracy"</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">##==Example 2: AUC criterion====##</span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">Sonar</span>, package<span class="op">=</span><span class="st">"mlbench"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">Sonar</span></span></span>
<span class="r-in"><span><span class="va">dat</span><span class="op">$</span><span class="va">Class</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">Class</span><span class="op">==</span><span class="st">"R"</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">OptimalModelSearch</span><span class="op">(</span>formula<span class="op">=</span><span class="va">Class</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">dat</span>,</span></span>
<span class="r-in"><span>                           criterion<span class="op">=</span><span class="st">"AUC"</span>, training_percent<span class="op">=</span><span class="fl">0.8</span>,</span></span>
<span class="r-in"><span>                           suppress_warnings<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Setting levels: control = 0, case = 1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Setting direction: controls &lt; cases</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Setting levels: control = 0, case = 1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Setting direction: controls &lt; cases</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Setting levels: control = 0, case = 1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Setting direction: controls &lt; cases</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Setting levels: control = 0, case = 1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Setting direction: controls &lt; cases</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Setting levels: control = 0, case = 1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Setting direction: controls &lt; cases</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Setting levels: control = 0, case = 1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Setting direction: controls &lt; cases</span>
<span class="r-in"><span><span class="va">result</span><span class="op">$</span><span class="va">best_model_name</span>  <span class="co"># View best model</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "ridge"</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">##==Example 3: AIC criterion====##</span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">PimaIndiansDiabetes</span>, package<span class="op">=</span><span class="st">"mlbench"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data.t</span> <span class="op">&lt;-</span> <span class="va">PimaIndiansDiabetes</span></span></span>
<span class="r-in"><span><span class="va">data.t</span><span class="op">$</span><span class="va">diabetes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">data.t</span><span class="op">$</span><span class="va">diabetes</span><span class="op">==</span><span class="st">"neg"</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">OptimalModelSearch</span><span class="op">(</span>formula<span class="op">=</span><span class="va">diabetes</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">data.t</span>,</span></span>
<span class="r-in"><span>                            criterion<span class="op">=</span><span class="st">"AIC"</span>, training_percent<span class="op">=</span><span class="fl">0.8</span>,</span></span>
<span class="r-in"><span>                            suppress_warnings<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result</span><span class="op">$</span><span class="va">best_model_name</span>  <span class="co"># View best model</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "gam"</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">##==Example 4: ROC Visualization with Multi-Panel Plot====##</span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">Sonar</span>, package<span class="op">=</span><span class="st">"mlbench"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">Sonar</span></span></span>
<span class="r-in"><span><span class="va">dat</span><span class="op">$</span><span class="va">Class</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">Class</span><span class="op">==</span><span class="st">"R"</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Plot all ROC curves in separate panels - clearer visualization</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">OptimalModelSearch</span><span class="op">(</span>formula<span class="op">=</span><span class="va">Class</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">dat</span>,</span></span>
<span class="r-in"><span>                          criterion<span class="op">=</span><span class="st">"AUC"</span>, training_percent<span class="op">=</span><span class="fl">0.8</span>,</span></span>
<span class="r-in"><span>                          suppress_warnings<span class="op">=</span><span class="cn">TRUE</span>, plot_roc<span class="op">=</span><span class="cn">TRUE</span>, </span></span>
<span class="r-in"><span>                          plot_comparison<span class="op">=</span><span class="cn">TRUE</span>, multi_panel<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Setting levels: control = 0, case = 1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Setting direction: controls &lt; cases</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Setting levels: control = 0, case = 1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Setting direction: controls &lt; cases</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Setting levels: control = 0, case = 1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Setting direction: controls &lt; cases</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Setting levels: control = 0, case = 1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Setting direction: controls &lt; cases</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Setting levels: control = 0, case = 1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Setting direction: controls &lt; cases</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Setting levels: control = 0, case = 1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Setting direction: controls &lt; cases</span>
<span class="r-plt img"><img src="OptimalModelSearch-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Christopher Odoom.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

